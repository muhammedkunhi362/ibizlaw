generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

enum CaseStatus {
  OPEN
  IN_PROGRESS
  HEARING_SCHEDULED
  ADJOURNED
  CLOSED
}

model Admin {
  id           String   @id @default(uuid())
  email        String   @unique
  passwordHash String
  name         String
  createdAt    DateTime @default(now())
}

model Case {
  id              String         @id @default(uuid())
  caseId          String         @unique
  title           String
  clientName      String
  status          CaseStatus     @default(OPEN)
  description     String?
  nextHearingDate DateTime?
  notes           String?
  isArchived      Boolean        @default(false)
  createdAt       DateTime       @default(now())
  updatedAt       DateTime       @updatedAt
  updateLogs      CaseUpdateLog[]
}

model CaseUpdateLog {
  id        String   @id @default(uuid())
  caseId    String
  case      Case     @relation(fields: [caseId], references: [id], onDelete: Cascade)
  actionType String
  oldValue  String?
  newValue  String?
  updatedBy String
  updatedAt DateTime @default(now())
}
